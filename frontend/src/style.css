:root {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  --noise-pattern: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
}

/* --- ГЛОБАЛЬНЫЕ ЦВЕТОВЫЕ ПЕРЕМЕННЫЕ --- */
body.theme-dark {
  --app-bg: #0b0f1a;
  --app-text: #f1f5f9;
  --app-text-muted: #94a3b8;
  --app-border: #1e293b;
  --card-bg-base: rgba(255, 255, 255, 0.05);
  --header-bg: #0f172a;
}

body.theme-light {
  --app-bg: #f8fafc;
  --app-text: #0f172a;
  --app-text-muted: #64748b;
  --app-border: #e2e8f0;
  --card-bg-base: rgba(255, 255, 255, 0.7);
  --header-bg: #ffffff;
}

/* --- 1. GLASSMORPHISM (Классический / Технологичный) --- */
body.design-glass {
  --glass-blur: blur(10px); 
  --border-radius: 16px;
  --app-accent: #6366f1;
  --card-bg: var(--card-bg-base);
  --card-border: 1px solid rgba(255, 255, 255, 0.1);
  --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  --body-bg-image: radial-gradient(circle at top right, #1e1b4b, #0b0f1a);
}

body.theme-light.design-glass {
  --card-border: 1px solid rgba(0, 0, 0, 0.05);
  --body-bg-image: radial-gradient(circle at top right, #e0e7ff, #f8fafc);
}

/* --- 2. PURE ANDROID (Material 3 / Плоский) --- */
body.design-material {
  --glass-blur: none; 
  --border-radius: 24px;
  --app-accent: #d0bcff;
  --card-bg: #211f26;
  --card-border: 1px solid #49454f;
  --card-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  --body-bg-image: none;
}

body.theme-light.design-material {
  --app-accent: #6750a4;
  --card-bg: #f3edf7;
  --card-border: 1px solid #cac4d0;
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* --- 3. LIQUID GLASS (iOS / Органический / Влажный) --- */
body.design-liquid {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
  --glass-blur: blur(35px); 
  --border-radius: 32px;
  --app-accent: #007aff;
  --card-bg: rgba(30, 30, 30, 0.4);
  --card-border: 0.5px solid rgba(255, 255, 255, 0.2);
  --card-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  --body-bg-image: linear-gradient(160deg, #1a1a1a 0%, #000000 100%);
  
  /* Специфический эффект внутреннего свечения для "жидкости" */
  --inner-glow: inset 0 1px 1px rgba(255, 255, 255, 0.15), inset 0 -1px 1px rgba(0, 0, 0, 0.2);
}

body.theme-light.design-liquid {
  --card-bg: rgba(255, 255, 255, 0.6);
  --card-border: 0.5px solid rgba(0, 0, 0, 0.1);
  --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  --body-bg-image: linear-gradient(160deg, #ffffff 0%, #f2f2f7 100%);
  --inner-glow: inset 0 1px 1px rgba(255, 255, 255, 0.8), inset 0 -1px 1px rgba(0, 0, 0, 0.05);
}

/* --- ПРИМЕНЕНИЕ СТИЛЕЙ --- */
body {
  background-color: var(--app-bg);
  background-image: var(--body-bg-image);
  color: var(--app-text);
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 100vh;
  margin: 0;
  background-attachment: fixed;
}

.product-card, .form-card, .nav-bar, .settings-sheet, .settings-btn, .update-all-btn {
  background: var(--card-bg) !important;
  backdrop-filter: var(--glass-blur);
  -webkit-backdrop-filter: var(--glass-blur);
  border: var(--card-border) !important;
  border-radius: var(--border-radius) !important;
  box-shadow: var(--card-shadow), var(--inner-glow, none) !important;
  transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
}

/* Улучшенный Hover */
.product-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 15px 45px rgba(0, 0, 0, 0.25), var(--inner-glow, none) !important;
}

/* Исправление навигации для светлой темы */
.nav-bar {
  background: var(--card-bg) !important;
}

/* Кнопки */
button {
  cursor: pointer;
  border: none;
  font-family: inherit;
}

.submit-btn {
  background: var(--app-accent) !important;
  color: #fff !important;
  font-weight: 700;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

body.theme-light .submit-btn {
  color: #fff !important;
}

/* Индикаторы */
.status-indicator {
  border-radius: 10px;
  padding: 4px 12px;
  font-size: 0.7rem;
  font-weight: 800;
}

/* Кастомизация скроллбара */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-thumb {
  background: var(--app-text-muted);
  border-radius: 10px;
  opacity: 0.3;
}
